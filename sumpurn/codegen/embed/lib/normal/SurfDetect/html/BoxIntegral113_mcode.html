<!-- saved from url=(0014)about:internet -->
<html>
<body>
<script src="resources/eml_report_loadable_data.js"></script>
<pre class="code">
<span class="srcline"><span class="lineno"><a href="61,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T2U3">result</span> = BoxIntegral(<span class="var type1" id="S3T5U6">intImage</span>, <span class="var type1" id="S4T7U7">row</span>, <span class="var type1" id="S5T7U8">col</span>, <span class="var type1" id="S6T7U9">rows</span>, <span class="var type1" id="S7T7U10">cols</span>) <span class="comment">%#codegen</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="61,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%   Copyright 2017 The MathWorks, Inc.</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,4" id="srcline4"> 4</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="61,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">% Image dimensions</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo " id="T44:U7"><span class="var type1" id="S8T44U13">imgDim</span> = <span class="mxinfo " id="T44:U9">size(<span class="var type1" id="S3T5U16">intImage</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo " id="T7:U11"><span class="var type1" id="S10T7U19">i_height</span> = <span class="mxinfo " id="T7:U13"><span class="var type1" id="S8T44U21">imgDim</span>(<span class="mxinfo " id="T7:U15">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo " id="T7:U16"><span class="var type1" id="S11T7U25">i_width</span> = <span class="mxinfo " id="T7:U18"><span class="var type1" id="S8T44U27">imgDim</span>(<span class="mxinfo " id="T7:U20">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo " id="T7:U21"><span class="var type1" id="S12T7U31">stepSize</span> = <span class="var type1" id="S10T7U32">i_height</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,10" id="srcline10">10</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="61,11" id="srcline11">11</a></span><span class="line"><span class="comment">% Handle border cases for integral sum calculation</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,12" id="srcline12">12</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T11:U24"><span class="var type1" id="S4T7U36">row</span> &lt;= <span class="var type1" id="S10T7U37">i_height</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="61,13" id="srcline13">13</a></span><span class="line">    <span class="mxinfo " id="T7:U27"><span class="var type1" id="S13T7U40">r1</span> = <span class="mxinfo " id="T7:U29"><span class="var type1" id="S4T7U42">row</span> - <span class="mxinfo " id="T7:U31">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,14" id="srcline14">14</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,15" id="srcline15">15</a></span><span class="line">    <span class="mxinfo " id="T7:U32"><span class="var type1" id="S13T7U47">r1</span> = <span class="mxinfo " id="T7:U34"><span class="var type1" id="S10T7U49">i_height</span> - <span class="mxinfo " id="T7:U36">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,16" id="srcline16">16</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,17" id="srcline17">17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="61,18" id="srcline18">18</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T11:U37"><span class="var type1" id="S5T7U54">col</span> &lt;= <span class="var type1" id="S11T7U55">i_width</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="61,19" id="srcline19">19</a></span><span class="line">    <span class="mxinfo " id="T7:U40"><span class="var type1" id="S14T7U58">c1</span> = <span class="mxinfo " id="T7:U42"><span class="var type1" id="S5T7U60">col</span> - <span class="mxinfo " id="T7:U44">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,20" id="srcline20">20</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,21" id="srcline21">21</a></span><span class="line">    <span class="mxinfo " id="T7:U45"><span class="var type1" id="S14T7U65">c1</span> = <span class="mxinfo " id="T7:U47"><span class="var type1" id="S11T7U67">i_width</span> - <span class="mxinfo " id="T7:U49">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,22" id="srcline22">22</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,23" id="srcline23">23</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="61,24" id="srcline24">24</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T11:U50"><span class="mxinfo " id="T7:U51"><span class="var type1" id="S4T7U73">row</span> + <span class="var type1" id="S6T7U74">rows</span></span> &lt;= <span class="var type1" id="S10T7U75">i_height</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="61,25" id="srcline25">25</a></span><span class="line">    <span class="mxinfo " id="T7:U55"><span class="var type1" id="S15T7U78">r2</span> = <span class="mxinfo " id="T7:U57"><span class="mxinfo " id="T7:U58"><span class="var type1" id="S4T7U81">row</span> + <span class="var type1" id="S6T7U82">rows</span></span> - <span class="mxinfo " id="T7:U61">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,26" id="srcline26">26</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,27" id="srcline27">27</a></span><span class="line">    <span class="mxinfo " id="T7:U62"><span class="var type1" id="S15T7U87">r2</span> = <span class="mxinfo " id="T7:U64"><span class="var type1" id="S10T7U89">i_height</span> - <span class="mxinfo " id="T7:U66">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,28" id="srcline28">28</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,29" id="srcline29">29</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="61,30" id="srcline30">30</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T11:U67"><span class="mxinfo " id="T7:U68"><span class="var type1" id="S5T7U95">col</span> + <span class="var type1" id="S7T7U96">cols</span></span> &lt;= <span class="var type1" id="S11T7U97">i_width</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="61,31" id="srcline31">31</a></span><span class="line">    <span class="mxinfo " id="T7:U72"><span class="var type1" id="S16T7U100">c2</span> = <span class="mxinfo " id="T7:U74"><span class="mxinfo " id="T7:U75"><span class="var type1" id="S5T7U103">col</span> + <span class="var type1" id="S7T7U104">cols</span></span> - <span class="mxinfo " id="T7:U78">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,32" id="srcline32">32</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,33" id="srcline33">33</a></span><span class="line">    <span class="mxinfo " id="T7:U79"><span class="var type1" id="S16T7U109">c2</span> = <span class="mxinfo " id="T7:U81"><span class="var type1" id="S11T7U111">i_width</span> - <span class="mxinfo " id="T7:U83">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,34" id="srcline34">34</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,35" id="srcline35">35</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="61,36" id="srcline36">36</a></span><span class="line"><span class="comment">% Compute A, B, C, D (corner coordinates of the rectangular region)</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,37" id="srcline37">37</a></span><span class="line"><span class="mxinfo " id="T2:U84"><span class="var type1" id="S17T2U115">A</span> = <span class="mxinfo " id="T2:U86">single(<span class="mxinfo " id="T7:U87">0</span>)</span></span>; <span class="mxinfo " id="T2:U88"><span class="var type1" id="S19T2U121">B</span> = <span class="mxinfo " id="T2:U90">single(<span class="mxinfo " id="T7:U91">0</span>)</span></span>; <span class="mxinfo " id="T2:U92"><span class="var type1" id="S20T2U127">C</span> = <span class="mxinfo " id="T2:U94">single(<span class="mxinfo " id="T7:U95">0</span>)</span></span>; <span class="mxinfo " id="T2:U96"><span class="var type1" id="S21T2U133">D</span> = <span class="mxinfo " id="T2:U98">single(<span class="mxinfo " id="T7:U99">0</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,38" id="srcline38">38</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="61,39" id="srcline39">39</a></span><span class="line"><span class="keyword">if</span> (<span class="mxinfo " id="T11:U100"><span class="var type1" id="S13T7U142">r1</span> &gt;= <span class="mxinfo " id="T7:U102">0</span></span> &amp;&amp; <span class="mxinfo " id="T11:U103"><span class="var type1" id="S14T7U145">c1</span> &gt;= <span class="mxinfo " id="T7:U105">0</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="61,40" id="srcline40">40</a></span><span class="line">    <span class="mxinfo " id="T2:U106"><span class="var type1" id="S17T2U149">A</span> = <span class="mxinfo " id="T2:U108"><span class="var type1" id="S3T5U151">intImage</span>(<span class="mxinfo " id="T7:U110"><span class="potentialdiff PD3"><span class="mxinfo " id="T7:U111"><span class="mxinfo " id="T7:U112"><span class="var type1" id="S14T7U155">c1</span> * <span class="var type1" id="S12T7U156">stepSize</span></span> + <span class="var type1" id="S13T7U157">r1</span></span> + <span class="mxinfo " id="T7:U116">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,41" id="srcline41">41</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,42" id="srcline42">42</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="61,43" id="srcline43">43</a></span><span class="line"><span class="keyword">if</span> (<span class="mxinfo " id="T11:U117"><span class="var type1" id="S13T7U164">r1</span> &gt;= <span class="mxinfo " id="T7:U119">0</span></span> &amp;&amp; <span class="mxinfo " id="T11:U120"><span class="var type1" id="S16T7U167">c2</span> &gt;= <span class="mxinfo " id="T7:U122">0</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="61,44" id="srcline44">44</a></span><span class="line">    <span class="mxinfo " id="T2:U123"><span class="var type1" id="S19T2U171">B</span> = <span class="mxinfo " id="T2:U125"><span class="var type1" id="S3T5U173">intImage</span>(<span class="mxinfo " id="T7:U127"><span class="potentialdiff PD3"><span class="mxinfo " id="T7:U128"><span class="mxinfo " id="T7:U129"><span class="var type1" id="S16T7U177">c2</span> * <span class="var type1" id="S12T7U178">stepSize</span></span> + <span class="var type1" id="S13T7U179">r1</span></span> + <span class="mxinfo " id="T7:U133">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,45" id="srcline45">45</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,46" id="srcline46">46</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="61,47" id="srcline47">47</a></span><span class="line"><span class="keyword">if</span> (<span class="mxinfo " id="T11:U134"><span class="var type1" id="S15T7U186">r2</span> &gt;= <span class="mxinfo " id="T7:U136">0</span></span> &amp;&amp; <span class="mxinfo " id="T11:U137"><span class="var type1" id="S14T7U189">c1</span> &gt;= <span class="mxinfo " id="T7:U139">0</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="61,48" id="srcline48">48</a></span><span class="line">    <span class="mxinfo " id="T2:U140"><span class="var type1" id="S20T2U193">C</span> = <span class="mxinfo " id="T2:U142"><span class="var type1" id="S3T5U195">intImage</span>(<span class="mxinfo " id="T7:U144"><span class="potentialdiff PD3"><span class="mxinfo " id="T7:U145"><span class="mxinfo " id="T7:U146"><span class="var type1" id="S14T7U199">c1</span> * <span class="var type1" id="S12T7U200">stepSize</span></span> + <span class="var type1" id="S15T7U201">r2</span></span> + <span class="mxinfo " id="T7:U150">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,49" id="srcline49">49</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,50" id="srcline50">50</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="61,51" id="srcline51">51</a></span><span class="line"><span class="keyword">if</span> (<span class="mxinfo " id="T11:U151"><span class="var type1" id="S15T7U208">r2</span> &gt;= <span class="mxinfo " id="T7:U153">0</span></span> &amp;&amp; <span class="mxinfo " id="T11:U154"><span class="var type1" id="S16T7U211">c2</span> &gt;= <span class="mxinfo " id="T7:U156">0</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="61,52" id="srcline52">52</a></span><span class="line">    <span class="mxinfo " id="T2:U157"><span class="var type1" id="S21T2U215">D</span> = <span class="mxinfo " id="T2:U159"><span class="var type1" id="S3T5U217">intImage</span>(<span class="mxinfo " id="T7:U161"><span class="potentialdiff PD3"><span class="mxinfo " id="T7:U162"><span class="mxinfo " id="T7:U163"><span class="var type1" id="S16T7U221">c2</span> * <span class="var type1" id="S12T7U222">stepSize</span></span> + <span class="var type1" id="S15T7U223">r2</span></span> + <span class="mxinfo " id="T7:U167">1</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,53" id="srcline53">53</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,54" id="srcline54">54</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="61,55" id="srcline55">55</a></span><span class="line"><span class="comment">% Compute sum of pixels within the rectangular region</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,56" id="srcline56">56</a></span><span class="line"><span class="mxinfo " id="T2:U168"><span class="var type1" id="S22T2U227">temp</span> = <span class="mxinfo " id="T2:U170"><span class="mxinfo " id="T2:U171"><span class="mxinfo " id="T2:U172"><span class="var type1" id="S17T2U231">A</span> - <span class="var type1" id="S19T2U232">B</span></span> - <span class="var type1" id="S20T2U233">C</span></span> + <span class="var type1" id="S21T2U234">D</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,57" id="srcline57">57</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="61,58" id="srcline58">58</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T11:U177"><span class="mxinfo " id="T7:U178">0</span> &gt;= <span class="var type1" id="S22T2U239">temp</span></span></span></span>
<span class="srcline"><span class="lineno"><a href="61,59" id="srcline59">59</a></span><span class="line">    <span class="mxinfo " id="T2:U180"><span class="var type1" id="S2T2U242">result</span> = <span class="mxinfo " id="T2:U182">single(<span class="mxinfo " id="T7:U183">0</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,60" id="srcline60">60</a></span><span class="line"><span class="keyword">else</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,61" id="srcline61">61</a></span><span class="line">    <span class="mxinfo " id="T2:U184"><span class="var type1" id="S2T2U249">result</span> = single(<span class="var type1" id="S22T2U252">temp</span>)</span>;</span></span>
<span class="srcline"><span class="lineno"><a href="61,62" id="srcline62">62</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="61,63" id="srcline63">63</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="61,64" id="srcline64">64</a></span><span class="line"><span class="keyword">end</span>   <span class="comment">%End of BoxIntegral</span></span></span>
</pre>
</body>
</html>
